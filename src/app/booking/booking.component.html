<div class="container my-4">
  <h2 class="mb-4">Booking Management</h2>

  <!-- Booking Form Card -->
  <div class="card shadow-lg mb-4">
    <div class="card-header bg-primary text-white">
      {{ editingIndex !== null ? 'Update Booking' : 'Add Booking' }}
    </div>
    <div class="card-body">
      <form #bookingForm="ngForm" (ngSubmit)="addOrUpdateBooking(booking)">
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">Guest Name</label>
            <input type="text" class="form-control" placeholder="Enter guest name"
                   [(ngModel)]="booking.guest" name="guest" required>
          </div>

          <div class="col-md-4">
            <label class="form-label">Room</label>
            <select class="form-select" [(ngModel)]="booking.room" name="room" required>
              <option value="" disabled>Select Room</option>
              <option *ngFor="let r of rooms" [value]="r.number">
                {{ r.number }} - {{ r.type }}
              </option>
            </select>
          </div>

          <div class="col-md-2">
            <label class="form-label">Check-in</label>
            <input type="date" class="form-control" [(ngModel)]="booking.checkin" name="checkin" required>
          </div>

          <div class="col-md-2">
            <label class="form-label">Check-out</label>
            <input type="date" class="form-control" [(ngModel)]="booking.checkout" name="checkout" required>
          </div>

          <div class="col-12 mt-3">
            <button type="submit" class="btn btn-success w-100">
              {{ editingIndex !== null ? 'Update Booking' : 'Add Booking' }}
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Search -->
  <div class="mb-4">
    <input type="text" class="form-control" placeholder="Search by guest or room" [(ngModel)]="searchText">
  </div>

  <!-- Booking Cards -->
  <div class="row">
    <div class="col-md-4 mb-4" *ngFor="let b of filteredBookings; index as i">
      <div class="card shadow-lg h-100">
        <div class="card-header bg-dark text-white">
          Booking #{{ i + 1 }}
        </div>
        <div class="card-body">
          <h5 class="card-title">{{ b.guest }}</h5>
          <p class="card-text">
            <strong>Room:</strong> {{ b.room }} <br>
            <strong>Check-in:</strong> {{ b.checkin }} <br>
            <strong>Check-out:</strong> {{ b.checkout }} <br>
            <strong>Duration:</strong> {{ stayDuration(b) }} days
          </p>
        </div>
        <div class="card-footer d-flex justify-content-between">
          <button class="btn btn-sm btn-warning" (click)="editBooking(i)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteBooking(i)">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>
