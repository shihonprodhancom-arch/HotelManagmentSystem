<div class="container mt-4">
  <h2>Guest Management</h2>

  <!-- Add / Update Form -->
  <div class="card p-3 mb-3">
    <div class="row g-2">
      <div class="col-md-3">
        <input type="text" class="form-control" placeholder="Name" [(ngModel)]="guest.name">
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" placeholder="Phone" [(ngModel)]="guest.phone">
      </div>
      <div class="col-md-3">
        <input type="email" class="form-control" placeholder="Email" [(ngModel)]="guest.email">
      </div>
      <div class="col-md-3">
        <button class="btn btn-success w-100" (click)="addOrUpdateGuest(guest)">
          {{ editingIndex !== null ? 'Update' : 'Add' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Search -->
  <div class="mb-2">
    <input type="text" class="form-control" placeholder="Search..." [(ngModel)]="searchTerm">
  </div>

  <!-- Guest List -->
  <div class="row g-3">
    <div class="col-md-4" *ngFor="let g of pagedGuests; let i = index">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">{{ g.name }}</h5>
          <p class="card-text">
            Phone: {{ g.phone }} <br>
            Email: {{ g.email }}
          </p>
          <button class="btn btn-sm btn-info me-1" (click)="editGuest((currentPage-1)*pageSize + i)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteGuest((currentPage-1)*pageSize + i)">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <nav class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="prevPage()">Previous</a>
      </li>
      <li class="page-item" *ngFor="let p of [].constructor(totalPages()); let idx = index" [class.active]="currentPage === idx+1">
        <a class="page-link" (click)="goToPage(idx+1)">{{ idx+1 }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages()">
        <a class="page-link" (click)="nextPage()">Next</a>
      </li>
    </ul>
  </nav>
</div>
